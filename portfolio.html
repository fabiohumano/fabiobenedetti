
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfólio | Fabio Benedetti</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #050505; color: #ffffff; }
        .bg-grain { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: url('https://grainy-gradients.vercel.app/noise.svg'); opacity: 0.02; pointer-events: none; z-index: 9999; }
        
        .work-card { border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 8rem; margin-bottom: 8rem; }
        .work-card:last-child { border-bottom: none; }
        
        .skeleton { background: #111; border-radius: 2rem; animation: pulse 2s infinite ease-in-out; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
        
        .description-text { line-height: 1.8; color: #888; white-space: pre-wrap; font-weight: 300; }
        
        .btn-external {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            margin-top: 2rem;
            padding: 14px 28px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: white;
            text-decoration: none;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
            background: rgba(255,255,255,0.02);
        }
        .btn-external:hover {
            border-color: white;
            background: white;
            color: black;
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .mosaic-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }
        @media (min-width: 1024px) {
            .mosaic-grid { grid-template-columns: repeat(3, 1fr); gap: 1rem; }
        }
        .mosaic-item {
            border-radius: 1rem;
            overflow: hidden;
            background: #000;
            aspect-ratio: 1;
            border: 1px solid rgba(255,255,255,0.03);
            cursor: pointer;
        }
        .mosaic-item img {
            width: 100%; height: 100%; object-fit: cover;
            filter: grayscale(100%);
            transition: all 0.8s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .mosaic-item:hover img { filter: grayscale(0); transform: scale(1.1); }
        
        .feature-box {
            border-radius: 2.5rem;
            overflow: hidden;
            background: #000;
            border: 1px solid rgba(255,255,255,0.05);
            box-shadow: 0 40px 100px -20px rgba(0,0,0,1);
            position: relative;
        }
        
        iframe { width: 100%; height: 100%; border: 0; }
    </style>
</head>
<body class="selection:bg-white selection:text-black">
    <div class="bg-grain"></div>

    <nav class="fixed top-0 left-0 w-full z-50 p-8 flex justify-between items-center bg-black/40 backdrop-blur-xl border-b border-white/5">
        <a href="index.html" class="text-xl font-bold tracking-tighter text-white">HUMANO<span class="text-neutral-600 italic font-light">Studio</span></a>
        <div class="flex gap-10 uppercase tracking-[0.2em] text-[10px]">
            <a href="index.html" class="text-neutral-500 hover:text-white transition-colors">Início</a>
            <a href="bio.html" class="text-neutral-500 hover:text-white transition-colors">Bio</a>
            <a href="portfolio.html" class="text-white">Portfólio</a>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6 pt-48 pb-20">
        <header class="mb-40 text-center md:text-left">
            <h1 class="text-7xl md:text-9xl font-bold tracking-tighter mb-8 leading-[0.85]">Trabalhos <br><span class="italic text-neutral-800">Recentes.</span></h1>
            <p class="text-neutral-600 max-w-2xl text-xl font-light leading-relaxed">Cada projeto é uma jornada única entre a emoção humana e a precisão técnica do som.</p>
        </header>

        <div id="portfolio-feed" class="space-y-32">
            <!-- SKELETONS -->
            <div class="work-card">
                <div class="skeleton w-3/4 h-20 mb-10"></div>
                <div class="grid md:grid-cols-2 gap-12">
                    <div class="skeleton aspect-video"></div>
                    <div class="space-y-4">
                        <div class="skeleton w-full h-4"></div>
                        <div class="skeleton w-full h-4"></div>
                        <div class="skeleton w-2/3 h-4"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="py-24 text-center border-t border-white/5 bg-black">
        <p class="text-[9px] uppercase tracking-[0.4em] text-neutral-700">© 2024 Fabio Benedetti • HUMANO Studio • Juiz de Fora, MG</p>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = {
          apiKey: "AIzaSyDhSp-QPDZI2AbNrYdZO447NKTF2PMYjlQ",
          authDomain: "humano-studio.firebaseapp.com",
          projectId: "humano-studio",
          storageBucket: "humano-studio.firebasestorage.app",
          messagingSenderId: "938534325822",
          appId: "1:938534325822:web:abf5443336ce3224190b6f",
          measurementId: "G-CT1NF7WLBJ"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        onSnapshot(collection(db, "trabalhos"), (snapshot) => {
            const container = document.getElementById('portfolio-feed');
            if (snapshot.empty) { container.innerHTML = '<p class="text-neutral-700 uppercase tracking-widest text-center py-20">Aguardando mídias...</p>'; return; }

            let works = [];
            snapshot.forEach(doc => works.push({id: doc.id, ...doc.data()}));
            works.sort((a, b) => (a.ordem ?? 0) - (b.ordem ?? 0));

            container.innerHTML = '';
            works.forEach((item) => {
                const linkLabel = item.linkText?.trim() || "VER PROJETO";
                let videoId = '';
                if (item.videoUrl) {
                    try {
                        const url = item.videoUrl;
                        if (url.includes('v=')) videoId = url.split('v=')[1].split('&')[0];
                        else if (url.includes('youtu.be/')) videoId = url.split('youtu.be/')[1].split('?')[0];
                        else videoId = url.split('/').pop();
                    } catch(e) {}
                }

                container.innerHTML += `
                    <article class="work-card">
                        <div class="mb-12">
                            <h2 class="text-5xl md:text-8xl font-bold mb-4 tracking-tighter leading-tight">${item.titulo}</h2>
                            <p class="text-neutral-700 uppercase tracking-[0.4em] text-[10px] font-bold">${item.data || 'HUMANO Studio'}</p>
                        </div>

                        <!-- SEÇÃO DE MÍDIA PRINCIPAL -->
                        <div class="grid lg:grid-cols-12 gap-12 items-start">
                            
                            <div class="${videoId || item.galeria ? 'lg:col-span-8' : 'lg:col-span-12'}">
                                ${videoId ? `
                                    <div class="feature-box aspect-video mb-10">
                                        <iframe src="https://www.youtube.com/embed/${videoId}?rel=0&modestbranding=1" allowfullscreen></iframe>
                                    </div>
                                ` : (item.fotoUrl ? `
                                    <div class="feature-box mb-10">
                                        <img src="${item.fotoUrl}" class="w-full object-cover" alt="${item.titulo}">
                                    </div>
                                ` : '')}
                                
                                <div class="description-text text-xl md:text-2xl mb-8">
                                    ${item.descricao || ''}
                                </div>

                                ${item.linkUrl ? `
                                    <a href="${item.linkUrl}" target="_blank" class="btn-external">
                                        <span>${linkLabel}</span>
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
                                    </a>
                                ` : ''}
                            </div>

                            <!-- GALERIA LATERAL (MOSAICO) -->
                            ${item.galeria && item.galeria.length > 0 ? `
                                <div class="lg:col-span-4 space-y-4">
                                    <p class="text-[9px] uppercase tracking-[0.3em] text-neutral-600 mb-6 font-bold">Processo Criativo</p>
                                    <div class="mosaic-grid">
                                        ${item.galeria.map(img => `
                                            <div class="mosaic-item">
                                                <img src="${img.url}" alt="Bastidores" loading="lazy">
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}

                        </div>
                    </article>
                `;
            });
        });
    </script>
</body>
</html>
