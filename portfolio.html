<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfólio | Fabio Benedetti</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,400;0,700;0,900;1,900&display=swap" rel="stylesheet">
    <style>
        body { background: #000; color: #fff; font-family: 'Inter', sans-serif; }
        .nav-glass { background: rgba(0,0,0,0.8); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255,255,255,0.05); }
        .work-item { border-bottom: 1px solid rgba(255,255,255,0.05); padding: 4rem 0; transition: all 0.5s ease; cursor: pointer; }
        .work-item:hover { background: rgba(255,255,255,0.02); padding-left: 2rem; border-color: rgba(255,255,255,0.1); }
        .bg-layer { position: fixed; inset: 0; background-size: cover; background-position: center; filter: brightness(0.15); z-index: -1; }
    </style>
</head>
<body>
    <div id="bg-layer" class="bg-layer"></div>
    
    <nav class="fixed top-0 w-full z-[100] h-20 nav-glass flex items-center px-12">
        <div class="max-w-7xl mx-auto w-full flex justify-between items-center">
            <a href="index.html" id="dyn-main-name" class="font-black italic text-xl tracking-tighter uppercase">FABIO BENEDETTI</a>
            <div class="hidden md:flex gap-10">
                <a href="index.html" class="text-[10px] font-bold uppercase tracking-widest text-neutral-500 hover:text-white transition-colors">Início</a>
                <a href="portfolio.html" class="text-[10px] font-bold uppercase tracking-widest text-white">Portfólio</a>
                <a href="galeria.html" class="text-[10px] font-bold uppercase tracking-widest text-neutral-500 hover:text-white transition-colors">Galeria</a>
                <a href="bio.html" class="text-[10px] font-bold uppercase tracking-widest text-neutral-500 hover:text-white transition-colors">Bio</a>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6 pt-48 pb-20">
        <h1 class="text-7xl md:text-9xl font-black italic tracking-tighter mb-24 uppercase">Obras <br><span class="text-neutral-800 not-italic">Assinadas.</span></h1>
        <div id="portfolio-list" class="space-y-4">
            <!-- Listagem dinámica -->
            <div class="animate-pulse h-20 bg-neutral-900 rounded-lg"></div>
            <div class="animate-pulse h-20 bg-neutral-900 rounded-lg"></div>
        </div>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, onSnapshot, doc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
        
        const firebaseConfig = { apiKey: "AIzaSyDhSp-QPDZI2AbNrYdZO447NKTF2PMYjlQ", authDomain: "humano-studio.firebaseapp.com", projectId: "humano-studio", storageBucket: "humano-studio.firebasestorage.app", messagingSenderId: "938534325822", appId: "1:938534325822:web:abf5443336ce3224190b6f" };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Identidade
        onSnapshot(doc(db, "site_content", "settings"), (snap) => {
            if(snap.exists()) {
                const d = snap.data();
                const nameEl = document.getElementById('dyn-main-name');
                if (nameEl && d.mainName) nameEl.innerText = d.mainName;
            }
        });

        onSnapshot(doc(db, "site_content", "backgrounds"), (snap) => {
            const url = snap.data()?.portfolio || snap.data()?.home;
            if(url) document.getElementById('bg-layer').style.backgroundImage = `url('${url}')`;
        });

        onSnapshot(collection(db, "trabalhos"), (snap) => {
            const container = document.getElementById('portfolio-list');
            if(!container) return;
            container.innerHTML = '';
            let works = [];
            snap.forEach(d => works.push({id: d.id, ...d.data()}));
            works.sort((a,b) => (a.ordem || 0) - (b.ordem || 0));

            works.forEach(w => {
                container.innerHTML += `
                    <div class="work-item" onclick="window.location.href='obra.html?id=${w.id}'">
                        <div class="flex flex-col md:flex-row md:items-center justify-between gap-6">
                            <div>
                                <span class="text-[8px] uppercase tracking-[0.5em] text-neutral-600 mb-3 block">${w.data || 'PRODUÇÃO'}</span>
                                <h2 class="text-4xl md:text-6xl font-black italic tracking-tighter uppercase leading-none">${w.titulo}</h2>
                            </div>
                            <div class="flex items-center gap-4 text-[9px] font-bold uppercase tracking-widest text-neutral-500 group">
                                <span>Ver Detalhes</span>
                                <span class="text-xl">→</span>
                            </div>
                        </div>
                    </div>
                `;
            });
        });
    </script>
</body>
</html>